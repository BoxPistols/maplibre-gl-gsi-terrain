<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
		/>
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<title>ãƒ‰ãƒ­ãƒ¼ãƒ³é£›è¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
		<link rel="icon" type="image/svg+xml" href="./favicon.svg" />
		<link rel="apple-touch-icon" href="./apple-touch-icon.png" />
		<!-- MapLibre GL CSSã¯index.tsã§importã•ã‚Œã‚‹ãŸã‚ã€ã“ã“ã§ã®èª­ã¿è¾¼ã¿ã¯ä¸è¦ -->

		<!-- ãƒ¢ãƒã‚¤ãƒ«åˆ¤å®šã¨ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å² -->
		<script>
			// ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹åˆ¤å®šï¼ˆUser-Agent + ç”»é¢ã‚µã‚¤ã‚ºï¼‰
			;(function () {
				const isMobile =
					/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
						navigator.userAgent
					) || window.innerWidth <= 768

				// ãƒ¢ãƒã‚¤ãƒ«ãƒ•ãƒ©ã‚°ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«è¨­å®š
				window.IS_MOBILE_DEVICE = isMobile

				console.log('Device type:', isMobile ? 'MOBILE' : 'DESKTOP')
				console.log('User-Agent:', navigator.userAgent)
				console.log('Screen width:', window.innerWidth)

				// iOS Safariç”¨ã®å®Ÿéš›ã®ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ã•ã‚’è¨­å®š
				const setAppHeight = () => {
					const doc = document.documentElement
					// window.innerHeightã¯å®Ÿéš›ã®è¡¨ç¤ºé ˜åŸŸã®é«˜ã•ã‚’è¿”ã™
					doc.style.setProperty('--app-height', `${window.innerHeight}px`)
				}

				// åˆæœŸè¨­å®š
				setAppHeight()

				// ãƒªã‚µã‚¤ã‚ºæ™‚ã¨ã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ›´æ™‚ã«å†è¨ˆç®—
				window.addEventListener('resize', setAppHeight)
				window.addEventListener('orientationchange', () => {
					setTimeout(setAppHeight, 100) // ã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ›´å¾Œã«å°‘ã—å¾…ã¤
				})

				// iOSç”¨ã®è¿½åŠ å¯¾ç­–: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå¤‰æ›´æ™‚
				if (window.visualViewport) {
					window.visualViewport.addEventListener('resize', setAppHeight)
				}
			})()
		</script>

		<style>
			/* CSSå¤‰æ•°ã§ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ã•ã‚’ç®¡ç† */
			:root {
				--app-height: 100vh;
			}

			body {
				margin: 0;
				padding: 0;
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
				overflow: hidden;
				background: #000;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				/* iOS Safariç”¨ã®ã‚¿ãƒƒãƒæ“ä½œæœ€é©åŒ– */
				-webkit-touch-callout: none;
				-webkit-user-select: none;
				user-select: none;
				position: fixed;
				width: 100%;
				/* iOS Safariå¯¾å¿œã®é«˜ã•æŒ‡å®š */
				height: 100vh;
				height: -webkit-fill-available;
				height: 100dvh;
				/* Safe Areaã®è¨­å®šã¯ãƒãƒƒãƒ—ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«å½±éŸ¿ã—ãªã„ã‚ˆã†ã«å‰Šé™¤ */
				box-sizing: border-box;
			}

			#map {
				width: 100vw;
				/* iOS Safariå¯¾å¿œã®é«˜ã•æŒ‡å®š */
				height: 100vh;
				height: -webkit-fill-available;
				height: 100dvh;
				/* iOS Safariç”¨ã®ã‚¿ãƒƒãƒæ“ä½œæœ€é©åŒ– */
				touch-action: pan-x pan-y;
				box-sizing: border-box;
			}

			#controls {
				position: fixed;
				top: 0;
				left: -350px;
				width: 280px;
				height: 100vh;
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(8px);
				border-right: 1px solid rgba(255, 255, 255, 0.8);
				padding: 20px;
				z-index: 1000;
				box-shadow: 4px 0 20px rgba(0, 0, 0, 0.15);
				overflow-y: auto;
				transition: left 0.3s ease;
			}

			#controls.visible {
				left: 0;
			}

			.controls-toggle {
				position: fixed;
				top: 4px;
				left: 4px;
				width: 44px;
				height: 44px;
				background: rgba(255, 255, 255, 0.9);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.8);
				border-radius: 8px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 1001;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
				transition: all 0.2s ease;
			}

			.controls-toggle:hover {
				background: rgba(255, 255, 255, 1);
				transform: scale(1.05);
			}

			.controls-toggle svg {
				width: 24px;
				height: 24px;
				stroke: rgba(0, 0, 0, 0.8);
			}

			.control-section {
				margin-bottom: 16px;
			}

			.section-title {
				font-weight: 700;
				margin-bottom: 4px;
				color: rgba(0, 0, 0, 0.8);
				font-size: 12px;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			button {
				background: rgba(255, 255, 255, 0.7);
				color: rgba(0, 0, 0, 0.8);
				border: 1px solid rgba(255, 255, 255, 0.4);
				padding: 4px 8px;
				border-radius: 4px;
				cursor: pointer;
				margin: 2px;
				font-size: 11px;
				font-weight: 700;
				transition: all 0.2s ease;
				backdrop-filter: blur(4px);
				position: relative;
			}

			/* Tooltipã¯ JavaScript ã§å‹•çš„ã«ç”Ÿæˆï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«/ãƒ‰ãƒ­ãƒ¯ãƒ¼ã®z-indexå•é¡Œã‚’å›é¿ï¼‰ */
			.dynamic-tooltip {
				position: fixed;
				background: rgba(0, 0, 0, 0.95);
				color: white;
				padding: 10px 14px;
				border-radius: 8px;
				font-size: 12px;
				font-weight: 400;
				max-width: 280px;
				line-height: 1.5;
				z-index: 99999;
				pointer-events: none;
				box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
				opacity: 0;
				transition: opacity 0.15s ease;
				word-wrap: break-word;
			}

			.dynamic-tooltip.visible {
				opacity: 1;
			}

			.dynamic-tooltip::before {
				content: '';
				position: absolute;
				border: 7px solid transparent;
			}

			.dynamic-tooltip.arrow-top::before {
				top: -14px;
				left: 50%;
				transform: translateX(-50%);
				border-bottom-color: rgba(0, 0, 0, 0.95);
			}

			.dynamic-tooltip.arrow-bottom::before {
				bottom: -14px;
				left: 50%;
				transform: translateX(-50%);
				border-top-color: rgba(0, 0, 0, 0.95);
			}

			.dynamic-tooltip.arrow-left::before {
				left: -14px;
				top: 50%;
				transform: translateY(-50%);
				border-right-color: rgba(0, 0, 0, 0.95);
			}

			.dynamic-tooltip.arrow-right::before {
				right: -14px;
				top: 50%;
				transform: translateY(-50%);
				border-left-color: rgba(0, 0, 0, 0.95);
			}

			button:hover {
				background: rgba(255, 255, 255, 0.5);
				transform: translateY(-1px);
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
			}

			button.success {
				background: rgba(34, 197, 94, 0.3);
				border-color: rgba(34, 197, 94, 0.6);
				color: #166534;
			}

			button.success:hover {
				background: rgba(34, 197, 94, 0.4);
			}

			button.error {
				background: rgba(239, 68, 68, 0.3);
				border-color: rgba(239, 68, 68, 0.6);
				color: #991b1b;
			}

			button.error:hover {
				background: rgba(239, 68, 68, 0.4);
			}

			button.info {
				background: rgba(59, 130, 246, 0.3);
				border-color: rgba(59, 130, 246, 0.6);
				color: #1e40af;
			}

			button.info:hover {
				background: rgba(59, 130, 246, 0.4);
			}

			button.warning {
				background: rgba(245, 158, 11, 0.3);
				border-color: rgba(245, 158, 11, 0.6);
				color: #92400e;
			}

			button.warning:hover {
				background: rgba(245, 158, 11, 0.4);
			}

			.button-group {
				display: flex;
				flex-wrap: wrap;
				gap: 4px;
			}

			/* ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ã¯éè¡¨ç¤ºï¼‰ */
			.mobile-only {
				display: none;
			}

			/* ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ãƒœã‚¿ãƒ³ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ã¯éè¡¨ç¤ºï¼‰ */
			.mobile-flight-plan-toggle {
				display: none;
				position: fixed;
				top: 10px;
				right: 10px;
				width: 58px;
				height: 54px;
				background: rgba(255, 255, 255, 0.9);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.8);
				border-radius: 8px;
				cursor: pointer;
				align-items: center;
				justify-content: center;
				z-index: 2100;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
				transition: all 0.2s ease;
				color: rgba(0, 0, 0, 0.8);
			}

			.mobile-flight-plan-toggle:hover {
				background: rgba(255, 255, 255, 1);
				transform: scale(1.05);
			}

			/* ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ã¯éè¡¨ç¤ºï¼‰ */
			.mobile-home-button {
				display: none;
				position: fixed;
				top: 74px;
				right: 10px;
				width: 54px;
				height: 54px;
				background: rgba(255, 255, 255, 0.9);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.8);
				border-radius: 8px;
				cursor: pointer;
				align-items: center;
				justify-content: center;
				z-index: 2100;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
				transition: all 0.2s ease;
				font-size: 24px;
			}

			.mobile-home-button:hover {
				background: rgba(255, 255, 255, 1);
				transform: scale(1.05);
			}

			#status {
				margin-top: 12px;
				font-size: 11px;
				color: rgba(0, 0, 0, 0.7);
				padding: 4px 8px;
				background: rgba(255, 255, 255, 0.7);
				border-radius: 4px;
				border: 1px solid rgba(255, 255, 255, 0.3);
			}

			.info-panel {
				position: absolute;
				top: 20px;
				right: -300px;
				width: 280px;
				background: rgba(255, 255, 255, 0.6);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.7);
				padding: 16px;
				border-radius: 16px 0 0 16px;
				z-index: 1000;
				box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
				transition: right 0.3s ease;
			}

			.info-panel.visible {
				right: 0;
			}

			.info-panel-toggle {
				position: absolute;
				left: -40px;
				top: 50%;
				transform: translateY(-50%);
				width: 40px;
				height: 60px;
				background: rgba(255, 255, 255, 0.6);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.7);
				border-right: none;
				border-radius: 8px 0 0 8px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s ease;
				box-shadow: -4px 4px 12px rgba(0, 0, 0, 0.15);
				z-index: 1;
				padding: 0;
			}

			.info-panel-toggle:hover {
				background: rgba(255, 255, 255, 0.8);
				transform: translateY(-50%) translateX(-2px);
			}

			.info-panel-toggle svg {
				width: 20px;
				height: 20px;
				fill: rgba(0, 0, 0, 0.7);
			}

			.info-title {
				font-weight: 700;
				/* margin-bottom: 2px; */
				color: rgba(0, 0, 0, 0.8);
				font-size: 13px;
			}

			.info-list {
				font-size: 13px;
				color: rgba(0, 0, 0, 0.7);
				line-height: 1.5;
			}

			.info-list li {
				margin-bottom: 6px;
			}

			.footer {
				position: absolute;
				bottom: 0;
				left: 0;
				right: 0;
				background: rgba(0, 0, 0, 0.75);
				backdrop-filter: blur(8px);
				color: rgba(255, 255, 255, 0.9);
				padding: 16px;
				/* iOS Safe Areaå¯¾å¿œ - ãƒ›ãƒ¼ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã¨é‡ãªã‚‰ãªã„ã‚ˆã†ã« */
				padding-bottom: calc(16px + env(safe-area-inset-bottom, 0px));
				font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
				font-size: 11px;
				max-height: 180px;
				overflow-y: auto;
				z-index: 1000;
				border-top: 1px solid rgba(255, 255, 255, 0.2);
				/* åˆæœŸçŠ¶æ…‹ã¯è¡¨ç¤º */
			}

			.footer-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 12px;
				border-bottom: 1px solid rgba(255, 255, 255, 0.2);
				padding-bottom: 8px;
			}

			.footer-title {
				font-weight: 600;
				color: #22c55e;
				font-size: 12px;
			}

			.footer-controls {
				display: flex;
				gap: 8px;
			}

			.footer-controls button {
				background: rgba(255, 255, 255, 0.2);
				color: rgba(255, 255, 255, 0.9);
				border: 1px solid rgba(255, 255, 255, 0.3);
				padding: 4px 8px;
				font-size: 10px;
				cursor: pointer;
				border-radius: 6px;
			}

			.footer-controls button:hover {
				background: rgba(255, 255, 255, 0.3);
			}

			/* ãƒ•ãƒ©ã‚¤ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆå›ºå®šè¡¨ç¤ºï¼‰ */
			.flight-status {
				padding: 8px 12px;
				border-bottom: 1px solid rgba(255, 255, 255, 0.2);
			}

			/* ãƒ­ã‚°ã‚³ãƒ³ãƒ†ãƒŠï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ï¼‰ */
			.flight-log-container {
				flex: 1;
				overflow-y: auto;
				overflow-x: hidden;
				max-height: 180px;
				transition: all 0.3s ease;
				scrollbar-width: thin;
				scrollbar-color: rgba(255, 255, 255, 0.3) rgba(0, 0, 0, 0.2);
			}

			.flight-log-container::-webkit-scrollbar {
				width: 6px;
			}

			.flight-log-container::-webkit-scrollbar-track {
				background: rgba(0, 0, 0, 0.2);
			}

			.flight-log-container::-webkit-scrollbar-thumb {
				background: rgba(255, 255, 255, 0.3);
				border-radius: 3px;
			}

			.flight-log-container::-webkit-scrollbar-thumb:hover {
				background: rgba(255, 255, 255, 0.5);
			}

			.flight-log-container.hidden {
				display: none;
			}

			.flight-log-container.visible {
				display: block;
			}

			.flight-log {
				display: flex;
				flex-direction: column;
				gap: 3px;
				padding: 8px 12px;
			}

			.log-entry {
				display: flex;
				gap: 12px;
				padding: 4px 0;
				border-bottom: 1px solid rgba(255, 255, 255, 0.2);
				font-size: 10px;
			}

			.log-timestamp {
				color: rgba(255, 255, 255, 0.6);
				min-width: 70px;
			}

			.log-phase {
				color: #22c55e;
				font-weight: 600;
				min-width: 90px;
			}

			.log-action {
				color: #fbbf24;
			}

			.log-details {
				color: rgba(255, 255, 255, 0.8);
			}

			.log-error {
				color: #ef4444;
			}

			.log-success {
				color: #22c55e;
			}

			/* ãƒ•ãƒ©ã‚¤ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ */
			.flight-status-bar {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 8px 12px;
				margin-bottom: 8px;
				background: rgba(59, 130, 246, 0.15);
				border-radius: 6px;
				border: 1px solid rgba(59, 130, 246, 0.3);
			}

			.status-indicator {
				display: flex;
				align-items: center;
				gap: 6px;
			}

			.status-dot {
				width: 8px;
				height: 8px;
				border-radius: 50%;
				animation: pulse 2s infinite;
			}

			.status-indicator.active .status-dot {
				background: #22c55e;
				box-shadow: 0 0 8px #22c55e;
			}

			.status-indicator.standby .status-dot {
				background: #fbbf24;
				box-shadow: 0 0 8px #fbbf24;
			}

			@keyframes pulse {
				0%,
				100% {
					opacity: 1;
				}
				50% {
					opacity: 0.5;
				}
			}

			.status-text {
				color: rgba(255, 255, 255, 0.9);
				font-size: 11px;
				font-weight: 600;
			}

			.current-phase {
				display: flex;
				align-items: center;
				gap: 6px;
				font-size: 10px;
			}

			.phase-label {
				color: rgba(255, 255, 255, 0.7);
			}

			.phase-name {
				color: #22c55e;
				font-weight: 600;
			}

			.phase-number {
				color: rgba(255, 255, 255, 0.6);
			}

			/* æœ€æ–°ã®ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒª */
			.log-entry-latest {
				background: rgba(34, 197, 94, 0.1);
				border-left: 3px solid #22c55e;
				padding-left: 8px;
				animation: highlight 1s ease-in-out;
			}

			@keyframes highlight {
				0% {
					background: rgba(34, 197, 94, 0.3);
				}
				100% {
					background: rgba(34, 197, 94, 0.1);
				}
			}

			.log-entry-recent {
				opacity: 1;
				background: rgba(255, 255, 255, 0.02);
			}

			.latest-indicator {
				color: #22c55e;
				font-size: 8px;
				margin-right: 4px;
				animation: blink 1.5s infinite;
			}

			@keyframes blink {
				0%,
				100% {
					opacity: 1;
				}
				50% {
					opacity: 0.3;
				}
			}

			@keyframes slideIn {
				from {
					transform: translateX(400px);
					opacity: 0;
				}
				to {
					transform: translateX(0);
					opacity: 1;
				}
			}

			/* ä½ç½®æƒ…å ±ãƒ»ã‚«ãƒ¡ãƒ©æƒ…å ±ã®æ‹¡å¼µè¡¨ç¤º */
			.log-entry {
				flex-wrap: wrap;
			}

			.log-extended-info {
				width: 100%;
				margin-top: 4px;
				padding-left: 86px;
				font-size: 9px;
				display: flex;
				flex-direction: column;
				gap: 2px;
			}

			.log-position-info,
			.log-camera-info {
				display: flex;
				gap: 8px;
				align-items: center;
			}

			.info-label {
				color: rgba(255, 255, 255, 0.5);
				font-weight: 600;
				min-width: 50px;
			}

			.info-value {
				color: rgba(255, 255, 255, 0.7);
				background: rgba(255, 255, 255, 0.05);
				padding: 2px 6px;
				border-radius: 3px;
				font-family: 'Courier New', monospace;
			}

			.flight-plan-export {
				position: absolute;
				bottom: 200px;
				right: -280px;
				width: 260px;
				background: rgba(255, 255, 255, 0.6);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.7);
				padding: 16px;
				border-radius: 12px 0 0 12px;
				z-index: 1000;
				box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
				transition: right 0.3s ease;
			}

			.flight-plan-export.visible {
				right: 0;
			}

			.flight-plan-toggle {
				position: absolute;
				left: -40px;
				top: 50%;
				transform: translateY(-50%);
				width: 40px;
				height: 60px;
				background: rgba(255, 255, 255, 0.6);
				backdrop-filter: blur(4px);
				border: 1px solid rgba(255, 255, 255, 0.7);
				border-right: none;
				border-radius: 8px 0 0 8px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s ease;
				box-shadow: -4px 4px 12px rgba(0, 0, 0, 0.15);
				z-index: 1;
				padding: 0;
			}

			.flight-plan-toggle:hover {
				background: rgba(255, 255, 255, 0.8);
				transform: translateY(-50%) translateX(-2px);
			}

			.flight-plan-toggle svg {
				width: 20px;
				height: 20px;
				fill: rgba(0, 0, 0, 0.7);
			}

			.flight-plan-title {
				font-weight: 700;
				margin-bottom: 8px;
				color: rgba(0, 0, 0, 0.8);
				font-size: 13px;
			}

			.flight-plan-buttons {
				display: flex;
				flex-direction: column;
				gap: 6px;
			}

			.flight-plan-buttons button {
				background: rgba(255, 255, 255, 0.3);
				color: rgba(0, 0, 0, 0.8);
				border: 1px solid rgba(255, 255, 255, 0.4);
				padding: 6px 8px;
				border-radius: 6px;
				cursor: pointer;
				font-size: 11px;
				font-weight: 700;
				transition: all 0.2s ease;
			}

			.flight-plan-buttons button:hover {
				background: rgba(255, 255, 255, 0.5);
				transform: translateY(-1px);
			}

			.flight-plan-buttons button.success {
				background: rgba(34, 197, 94, 0.3);
				border-color: rgba(34, 197, 94, 0.6);
				color: #166534;
			}

			.flight-plan-buttons button.danger {
				background: rgba(239, 68, 68, 0.3);
				border-color: rgba(239, 68, 68, 0.6);
				color: #991b1b;
			}

			.flight-plan-buttons button.warning {
				background: rgba(245, 158, 11, 0.3);
				border-color: rgba(245, 158, 11, 0.6);
				color: #92400e;
			}

			.flight-plan-buttons button.info {
				background: rgba(59, 130, 246, 0.3);
				border-color: rgba(59, 130, 246, 0.6);
				color: #1e40af;
			}

			/* ä»®æƒ³ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ */
			.virtual-joystick {
				position: fixed;
				bottom: 40px;
				width: 140px;
				height: 140px;
				background: rgba(255, 255, 255, 0.15);
				border: 2px solid rgba(255, 255, 255, 0.3);
				border-radius: 50%;
				display: none;
				justify-content: center;
				align-items: center;
				z-index: 2000;
				touch-action: none;
				user-select: none;
				backdrop-filter: blur(8px);
			}

			.virtual-joystick.left {
				left: 40px;
			}

			.virtual-joystick.right {
				right: 40px;
			}

			.joystick-knob {
				width: 60px;
				height: 60px;
				background: rgba(255, 255, 255, 0.4);
				border: 2px solid rgba(255, 255, 255, 0.6);
				border-radius: 50%;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
				transition: opacity 0.2s ease;
				opacity: 0.5;
			}

			.joystick-label {
				position: absolute;
				top: -30px;
				left: 50%;
				transform: translateX(-50%);
				font-size: 10px;
				font-weight: 600;
				color: rgba(255, 255, 255, 0.8);
				text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
				white-space: nowrap;
			}

			/* ãƒ¢ãƒã‚¤ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– */
			@media (max-width: 768px) {
				/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³æœ€é©åŒ– */
				* {
					-webkit-transform: translateZ(0);
					-webkit-backface-visibility: hidden;
					-webkit-perspective: 1000;
				}

				/* é‡ã„åŠ¹æœã®ç„¡åŠ¹åŒ– */
				button {
					transition: none;
					box-shadow: none;
				}

				button:hover {
					transform: none;
					box-shadow: none;
				}

				.controls-toggle,
				.mobile-flight-plan-toggle {
					will-change: transform;
				}

				/* ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º */
				.mobile-only {
					display: block;
				}

				/* ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º */
				.mobile-flight-plan-toggle {
					display: flex;
				}

				/* ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º */
				.mobile-home-button {
					display: flex;
				}

				/* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã‚’å¤§ããã€ã‚¿ãƒƒãƒ—ã—ã‚„ã™ã */
				.controls-toggle {
					width: 54px;
					height: 54px;
					top: 10px;
					left: 10px;
					z-index: 2100; /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã‚ˆã‚Šä¸Šã«é…ç½® */
					position: fixed; /* å¸¸ã«åŒã˜ä½ç½®ã«å›ºå®š */
				}

				.controls-toggle svg {
					width: 28px;
					height: 28px;
				}

				#controls {
					top: 0;
					left: -100%;
					right: auto;
					width: 85%;
					max-width: 320px;
					padding: 16px;
					max-height: calc(100vh - 40px); /* ãƒ•ãƒƒã‚¿ãƒ¼åˆ†ã‚’å¼•ã„ã¦ä½™è£•ã‚’æŒãŸã›ã‚‹ */
					overflow-y: auto;
					-webkit-overflow-scrolling: touch; /* iOSç”¨ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
					border-radius: 0 16px 16px 0;
					z-index: 2000; /* ãƒ•ãƒƒã‚¿ãƒ¼ã‚ˆã‚Šä¸Šã« */
				}

				#controls.visible {
					left: 0;
				}

				#controls h3 {
					font-size: 14px !important;
					margin: 0 0 12px 0 !important;
				}

				.control-section {
					margin-bottom: 12px;
				}

				.section-title {
					font-size: 11px;
				}

				button {
					padding: 8px 12px;
					font-size: 11px;
					margin: 3px;
					min-width: 70px;
					min-height: 40px;
				}

				.info-panel {
					display: none !important; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯å®Œå…¨éè¡¨ç¤º */
				}

				.flight-plan-export {
					display: none !important; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯å®Œå…¨éè¡¨ç¤º */
				}

				/* ãƒ•ãƒƒã‚¿ãƒ¼ã‚’ãƒ¢ãƒã‚¤ãƒ«ã§ã¯æœ€å°é™ã« */
				.footer {
					padding: 4px 6px;
					/* iOS Safe Areaå¯¾å¿œ - ãƒ›ãƒ¼ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã¨é‡ãªã‚‰ãªã„ã‚ˆã†ã« */
					padding-bottom: calc(4px + env(safe-area-inset-bottom, 0px));
					font-size: 7px;
					max-height: calc(28px + env(safe-area-inset-bottom, 0px)); /* Safe Areaåˆ†ã‚’è¿½åŠ  */
					z-index: 1500; /* ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚ˆã‚Šä¸‹ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚ˆã‚Šä¸‹ */
				}

				.footer-header {
					margin-bottom: 2px;
					padding-bottom: 2px;
				}

				.footer-title {
					font-size: 8px;
				}

				.footer-controls {
					display: flex;
					gap: 4px;
				}

				.footer-controls button {
					padding: 2px 4px;
					font-size: 7px;
				}

				.flight-status {
					display: none; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯éè¡¨ç¤º */
				}

				.flight-log-container {
					display: none; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ãƒ­ã‚°ã‚’éè¡¨ç¤ºã«ã—ã¦ã‚¹ãƒšãƒ¼ã‚¹ç¢ºä¿ */
				}

				.log-entry {
					font-size: 7px;
					gap: 4px;
					padding: 2px 0;
				}

				.log-timestamp {
					min-width: 40px;
					font-size: 7px;
				}

				.log-phase {
					min-width: 50px;
					font-size: 7px;
				}

				.log-action {
					font-size: 7px;
				}

				.log-details {
					font-size: 7px;
				}

				.log-extended-info {
					display: none; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯è©³ç´°æƒ…å ±ã‚’éè¡¨ç¤º */
				}

				#gameControlHelp {
					display: none !important; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯éè¡¨ç¤º */
				}

				/* ä»®æƒ³ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚’ãƒ¢ãƒã‚¤ãƒ«ã§è¡¨ç¤ºã€ãƒ•ãƒƒã‚¿ãƒ¼ã¨é‡ãªã‚‰ãªã„ã‚ˆã†ã« */
				.virtual-joystick {
					width: 120px;
					height: 120px;
					z-index: 1800; /* ãƒ•ãƒƒã‚¿ãƒ¼ã‚ˆã‚Šä¸Šã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚ˆã‚Šä¸‹ */
				}

				.virtual-joystick.left {
					left: 20px;
					bottom: 40px; /* ãƒ•ãƒƒã‚¿ãƒ¼ãŒå°ã•ããªã£ãŸã®ã§èª¿æ•´ */
				}

				.virtual-joystick.right {
					right: 20px;
					bottom: 40px; /* ãƒ•ãƒƒã‚¿ãƒ¼ãŒå°ã•ããªã£ãŸã®ã§èª¿æ•´ */
				}

				.joystick-knob {
					width: 50px;
					height: 50px;
				}
			}

			@media (max-width: 480px) {
				.controls-toggle {
					width: 50px;
					height: 50px;
					top: 8px;
					left: 8px;
					z-index: 2100; /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã‚ˆã‚Šä¸Šã«é…ç½® */
					position: fixed;
				}

				.controls-toggle svg {
					width: 26px;
					height: 26px;
				}

				#controls {
					top: 0;
					left: -100%;
					width: 90%;
					max-width: 280px;
					padding: 12px;
					max-height: calc(100vh - 40px); /* ãƒ•ãƒƒã‚¿ãƒ¼åˆ†ã‚’å¼•ã */
					-webkit-overflow-scrolling: touch;
					z-index: 2000;
				}

				#controls h3 {
					font-size: 13px !important;
				}

				button {
					padding: 7px 10px;
					font-size: 10px;
					min-width: 65px;
					min-height: 38px;
				}

				.virtual-joystick {
					width: 100px;
					height: 100px;
					z-index: 1800;
				}

				.virtual-joystick.left {
					left: 10px;
					bottom: 35px; /* ãƒ•ãƒƒã‚¿ãƒ¼ãŒå°ã•ããªã£ãŸã®ã§èª¿æ•´ */
				}

				.virtual-joystick.right {
					right: 10px;
					bottom: 35px; /* ãƒ•ãƒƒã‚¿ãƒ¼ãŒå°ã•ããªã£ãŸã®ã§èª¿æ•´ */
				}

				.joystick-knob {
					width: 40px;
					height: 40px;
				}

				.footer {
					padding: 4px;
					/* iOS Safe Areaå¯¾å¿œ */
					padding-bottom: calc(4px + env(safe-area-inset-bottom, 0px));
					font-size: 7px;
					max-height: calc(28px + env(safe-area-inset-bottom, 0px)); /* Safe Areaåˆ†ã‚’è¿½åŠ  */
					z-index: 1500;
				}

				.footer-title {
					font-size: 7px;
				}

				.footer-controls button {
					padding: 2px 3px;
					font-size: 6px;
				}

				.flight-log-container {
					display: none; /* å®Œå…¨éè¡¨ç¤º */
				}

				.flight-status {
					display: none; /* å®Œå…¨éè¡¨ç¤º */
				}

				.log-entry {
					font-size: 6px;
				}
			}

			/* ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹ç”¨ã®èª¿æ•´ */
			@media (hover: none) and (pointer: coarse) {
				button {
					min-height: 36px;
					min-width: 70px;
				}

				.virtual-joystick {
					display: flex;
				}
			}

			/* MapLibre controls should be above info panels */
			.maplibregl-ctrl-group,
			.maplibregl-ctrl {
				z-index: 1100 !important;
			}

			/* ãƒ¢ãƒã‚¤ãƒ«ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ« */
			.mobile-flight-plan-modal-overlay {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				/* iOS Safariå¯¾å¿œã®é«˜ã•æŒ‡å®šï¼ˆå„ªå…ˆé †ä½é †ï¼‰ */
				height: var(--app-height); /* JavaScriptå‹•çš„è¨ˆç®—å€¤ã‚’å„ªå…ˆ */
				height: 100dvh; /* å‹•çš„ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ï¼ˆæœ€æ–°ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ï¼‰ */
				height: -webkit-fill-available; /* iOS Safariç”¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
				height: 100vh; /* æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
				background: rgba(0, 0, 0, 0.85); /* backdrop-filterã‚’å‰Šé™¤ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š */
				z-index: 3000; /* æœ€å‰é¢ */
				display: none;
				align-items: center;
				justify-content: center;
				padding: 10px;
				/* iOS Safe Areaå¯¾å¿œ */
				padding-top: max(10px, env(safe-area-inset-top));
				padding-bottom: max(10px, env(safe-area-inset-bottom));
				padding-left: max(10px, env(safe-area-inset-left));
				padding-right: max(10px, env(safe-area-inset-right));
				overflow-y: auto;
				-webkit-overflow-scrolling: touch; /* iOSç”¨ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
				/* iOSç”¨ã®è¿½åŠ å¯¾ç­– */
				box-sizing: border-box;
				overscroll-behavior: contain; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€£é–ã‚’é˜²ã */
			}

			.mobile-flight-plan-modal-overlay.visible {
				display: flex;
			}

			.mobile-flight-plan-modal {
				background: #ffffff;
				border-radius: 16px;
				width: calc(100vw - 20px - env(safe-area-inset-left) - env(safe-area-inset-right));
				max-width: 350px;
				padding: 20px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
				position: relative;
				box-sizing: border-box;
				/* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãŒå‡ºãŸæ™‚ã®å¯¾ç­– */
				max-height: calc(100vh - 40px - env(safe-area-inset-top) - env(safe-area-inset-bottom));
				max-height: calc(100dvh - 40px - env(safe-area-inset-top) - env(safe-area-inset-bottom));
				overflow-y: auto;
				-webkit-overflow-scrolling: touch;
				/* iOSç”¨ã®èª¿æ•´ */
				margin: auto;
				flex-shrink: 0;
			}

			.mobile-flight-plan-modal-close {
				position: absolute;
				top: 12px;
				right: 12px;
				width: 32px;
				height: 32px;
				min-width: 32px;
				min-height: 32px;
				background: rgba(0, 0, 0, 0.1);
				border: none;
				border-radius: 50%;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s ease;
				padding: 0;
			}

			.mobile-flight-plan-modal-close:hover {
				background: rgba(0, 0, 0, 0.2);
				transform: rotate(90deg);
			}

			.mobile-flight-plan-modal-close svg {
				width: 16px;
				height: 16px;
			}

			.mobile-flight-plan-buttons {
				display: flex;
				flex-direction: column;
				gap: 8px;
			}

			.mobile-fp-btn {
				width: 100%;
				padding: 10px 12px;
				border-radius: 8px;
				font-size: 14px;
				font-weight: 600;
				border: none;
				cursor: pointer;
				transition: all 0.2s ease;
				min-height: 42px; /* ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆ */
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.mobile-fp-start {
				background: #ef4444;
				color: white;
			}

			.mobile-fp-start:hover {
				background: #dc2626;
			}

			.mobile-fp-pause {
				background: #f59e0b;
				color: white;
			}

			.mobile-fp-pause:hover {
				background: #d97706;
			}

			.mobile-fp-manual {
				background: #3b82f6;
				color: white;
			}

			.mobile-fp-manual:hover {
				background: #2563eb;
			}

			.mobile-fp-export,
			.mobile-fp-import {
				background: #10b981;
				color: white;
			}

			.mobile-fp-export:hover,
			.mobile-fp-import:hover {
				background: #059669;
			}

			/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ã¯éè¡¨ç¤º */
			@media (min-width: 769px) {
				.mobile-flight-plan-modal-overlay {
					display: none !important;
				}
			}

			/* ã‚ˆã‚Šå°ã•ã„ç”»é¢ç”¨ã®èª¿æ•´ */
			@media (max-width: 380px) {
				.mobile-flight-plan-modal-overlay {
					padding: 8px;
					padding-top: max(8px, env(safe-area-inset-top));
					padding-bottom: max(8px, env(safe-area-inset-bottom));
					padding-left: max(8px, env(safe-area-inset-left));
					padding-right: max(8px, env(safe-area-inset-right));
				}

				.mobile-flight-plan-modal {
					padding: 16px;
					width: calc(100vw - 16px - env(safe-area-inset-left) - env(safe-area-inset-right));
					max-height: calc(
						var(--app-height) - 32px - env(safe-area-inset-top) - env(safe-area-inset-bottom)
					);
				}

				.mobile-flight-plan-modal h2 {
					font-size: 16px !important;
					margin: 0 0 16px 0;
				}

				.mobile-fp-btn {
					font-size: 13px;
					padding: 10px 12px;
					min-height: 40px;
				}
			}

			/* Help Modal */
			.help-modal-overlay {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0, 0, 0, 0.7);
				backdrop-filter: blur(4px);
				z-index: 10000;
				display: none;
				align-items: center;
				justify-content: center;
			}

			.help-modal-overlay.visible {
				display: flex;
			}

			.help-modal {
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(8px);
				border-radius: 16px;
				max-width: 800px;
				max-height: 80vh;
				overflow-y: auto;
				padding: 32px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
				position: relative;
			}

			.help-modal-close {
				position: absolute;
				top: 16px;
				right: 16px;
				width: 32px;
				height: 32px;
				min-width: 32px; /* ãƒ¢ãƒã‚¤ãƒ«ã®buttonã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¸Šæ›¸ã */
				min-height: 32px; /* ãƒ¢ãƒã‚¤ãƒ«ã®buttonã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¸Šæ›¸ã */
				background: rgba(0, 0, 0, 0.1);
				border: none;
				border-radius: 50%;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s ease;
				padding: 0; /* ãƒ¢ãƒã‚¤ãƒ«ã®buttonã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä¸Šæ›¸ã */
			}

			.help-modal-close:hover {
				background: rgba(0, 0, 0, 0.2);
				transform: rotate(90deg);
			}

			.help-modal-close svg {
				width: 16px;
				height: 16px;
			}

			.help-modal h2 {
				margin: 0 0 24px 0;
				font-size: 24px;
				font-weight: 700;
				color: rgba(0, 0, 0, 0.9);
			}

			.help-section {
				margin-bottom: 24px;
			}

			.help-section h3 {
				font-size: 16px;
				font-weight: 700;
				margin: 0 0 12px 0;
				color: rgba(0, 0, 0, 0.8);
				border-bottom: 2px solid rgba(0, 0, 0, 0.1);
				padding-bottom: 8px;
			}

			.help-section p {
				margin: 0 0 12px 0;
				line-height: 1.6;
				color: rgba(0, 0, 0, 0.7);
				font-size: 13px;
			}

			.help-section ul {
				margin: 0;
				padding-left: 20px;
			}

			.help-section li {
				margin-bottom: 8px;
				line-height: 1.6;
				color: rgba(0, 0, 0, 0.7);
				font-size: 13px;
			}

			.help-section strong {
				color: rgba(0, 0, 0, 0.9);
				font-weight: 700;
			}

			.help-button {
				background: rgba(59, 130, 246, 0.3);
				border-color: rgba(59, 130, 246, 0.6);
				color: #1e40af;
			}

			.help-button:hover {
				background: rgba(59, 130, 246, 0.4);
			}

			/* ãƒ‡ãƒãƒƒã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
			.debug-overlay {
				position: fixed;
				top: 60px;
				right: -420px;
				width: 400px;
				max-height: calc(100vh - 280px);
				background: rgba(0, 0, 0, 0.85);
				backdrop-filter: blur(8px);
				border-radius: 12px 0 0 12px;
				z-index: 2500;
				transition: right 0.3s ease;
				overflow: hidden;
				box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
				font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
			}

			.debug-overlay.visible {
				right: 0;
			}

			.debug-overlay-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 12px 16px;
				background: rgba(34, 197, 94, 0.2);
				border-bottom: 1px solid rgba(34, 197, 94, 0.3);
			}

			.debug-overlay-title {
				color: #22c55e;
				font-weight: 700;
				font-size: 13px;
				display: flex;
				align-items: center;
				gap: 8px;
			}

			.debug-overlay-title::before {
				content: '';
				width: 8px;
				height: 8px;
				background: #22c55e;
				border-radius: 50%;
				animation: pulse 1.5s infinite;
			}

			.debug-overlay-close {
				background: rgba(255, 255, 255, 0.1);
				border: none;
				color: rgba(255, 255, 255, 0.7);
				width: 28px;
				height: 28px;
				min-width: 28px;
				min-height: 28px;
				border-radius: 50%;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.2s ease;
				padding: 0;
				margin: 0;
			}

			.debug-overlay-close:hover {
				background: rgba(255, 255, 255, 0.2);
				color: white;
			}

			.debug-overlay-content {
				padding: 12px 16px;
				overflow-y: auto;
				max-height: calc(100vh - 340px);
				scrollbar-width: thin;
				scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
			}

			.debug-overlay-content::-webkit-scrollbar {
				width: 6px;
			}

			.debug-overlay-content::-webkit-scrollbar-track {
				background: transparent;
			}

			.debug-overlay-content::-webkit-scrollbar-thumb {
				background: rgba(255, 255, 255, 0.2);
				border-radius: 3px;
			}

			.debug-section {
				margin-bottom: 16px;
			}

			.debug-section-title {
				color: #fbbf24;
				font-weight: 600;
				font-size: 11px;
				text-transform: uppercase;
				letter-spacing: 0.5px;
				margin-bottom: 8px;
				padding-bottom: 4px;
				border-bottom: 1px solid rgba(251, 191, 36, 0.3);
			}

			.debug-row {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 4px 0;
				font-size: 11px;
				border-bottom: 1px solid rgba(255, 255, 255, 0.05);
			}

			.debug-row:last-child {
				border-bottom: none;
			}

			.debug-label {
				color: rgba(255, 255, 255, 0.6);
			}

			.debug-value {
				color: #60a5fa;
				font-weight: 500;
				text-align: right;
				max-width: 200px;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			.debug-value.success {
				color: #22c55e;
			}

			.debug-value.warning {
				color: #fbbf24;
			}

			.debug-value.error {
				color: #ef4444;
			}

			.debug-value.info {
				color: #60a5fa;
			}

			.debug-json {
				background: rgba(0, 0, 0, 0.3);
				border-radius: 6px;
				padding: 8px;
				font-size: 10px;
				color: rgba(255, 255, 255, 0.8);
				max-height: 150px;
				overflow-y: auto;
				white-space: pre-wrap;
				word-break: break-all;
				line-height: 1.4;
			}

			.debug-json .key {
				color: #fbbf24;
			}

			.debug-json .string {
				color: #22c55e;
			}

			.debug-json .number {
				color: #60a5fa;
			}

			.debug-json .boolean {
				color: #f472b6;
			}

			.debug-json .null {
				color: #9ca3af;
			}

			.debug-event-log {
				max-height: 120px;
				overflow-y: auto;
				background: rgba(0, 0, 0, 0.3);
				border-radius: 6px;
				padding: 8px;
			}

			.debug-event {
				display: flex;
				gap: 8px;
				padding: 3px 0;
				font-size: 10px;
				border-bottom: 1px solid rgba(255, 255, 255, 0.05);
				animation: slideInFromRight 0.3s ease;
			}

			@keyframes slideInFromRight {
				from {
					opacity: 0;
					transform: translateX(20px);
				}
				to {
					opacity: 1;
					transform: translateX(0);
				}
			}

			.debug-event:last-child {
				border-bottom: none;
			}

			.debug-event-time {
				color: rgba(255, 255, 255, 0.4);
				min-width: 60px;
			}

			.debug-event-type {
				color: #fbbf24;
				font-weight: 600;
				min-width: 80px;
			}

			.debug-event-data {
				color: rgba(255, 255, 255, 0.7);
				flex: 1;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			.debug-toggle-btn {
				position: fixed;
				top: 60px;
				right: 10px;
				width: 40px;
				height: 40px;
				background: rgba(251, 191, 36, 0.9);
				border: none;
				border-radius: 8px;
				cursor: pointer;
				display: none;
				align-items: center;
				justify-content: center;
				z-index: 2501;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
				transition: all 0.2s ease;
				color: #000;
				font-weight: 700;
				font-size: 12px;
			}

			.debug-toggle-btn:hover {
				background: rgba(251, 191, 36, 1);
				transform: scale(1.05);
			}

			.debug-toggle-btn.active {
				display: flex;
			}

			/* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
			@media (max-width: 768px) {
				.debug-overlay {
					width: 100%;
					right: -100%;
					top: 0;
					max-height: 50vh;
					border-radius: 0 0 12px 12px;
					top: auto;
					bottom: -50vh;
				}

				.debug-overlay.visible {
					right: 0;
					bottom: 200px;
				}

				.debug-toggle-btn {
					top: auto;
					bottom: 250px;
					right: 10px;
				}
			}
		</style>
	</head>

	<body>
		<div id="map"></div>

		<!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ -->
		<button class="controls-toggle" id="controlsToggle" data-tooltip="ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«">
			<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
				<path d="M3 12h18M3 6h18M3 18h18" stroke-width="2" stroke-linecap="round" />
			</svg>
		</button>

		<!-- ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ãƒœã‚¿ãƒ³ -->
		<button
			class="mobile-flight-plan-toggle"
			id="mobileFlightPlanToggle"
			data-tooltip="ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³"
			style="font-size: 10px; font-weight: 700; line-height: 1.2; padding: 4px; text-align: center"
		>
			DRONE<br />FLIGHT
		</button>

		<!-- ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ï¼ˆå®šä½ç½®ã«æˆ»ã‚‹ï¼‰ -->
		<button class="mobile-home-button" id="mobileHomeButton" data-tooltip="ãƒ›ãƒ¼ãƒ ä½ç½®ã«æˆ»ã‚‹">
			ğŸ 
		</button>

		<!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
		<div id="controls">
			<div
				style="
					display: flex;
					justify-content: space-between;
					align-items: center;
					margin-bottom: 16px;
				"
			>
				<h3
					style="
						margin: 0 0 0 32px;
						color: rgba(55, 55, 55, 0.9);
						font-size: 14px;
						font-weight: 600;
					"
				>
					ãƒ‰ãƒ­ãƒ¼ãƒ³é£›è¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
				</h3>
				<button id="helpButton" class="help-button" data-tooltip="ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º">
					<svg
						viewBox="0 0 24 24"
						xmlns="http://www.w3.org/2000/svg"
						style="width: 14px; height: 14px; fill: currentColor"
					>
						<path
							d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"
						/>
					</svg>
				</button>
			</div>

			<!-- ãƒãƒƒãƒ—ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
			<div class="control-section">
				<div class="section-title">ãƒãƒƒãƒ—ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼</div>
				<div class="button-group">
					<select
						id="mapProviderSelect"
						style="
							width: 100%;
							margin-bottom: 8px;
							padding: 6px;
							border-radius: 4px;
							border: 1px solid rgba(0, 0, 0, 0.2);
							background: rgba(255, 255, 255, 0.9);
							font-size: 12px;
						"
					>
						<option value="maplibre">MapLibre GLï¼ˆæ¨å¥¨ï¼‰</option>
						<option value="mapbox">Mapbox GL</option>
					</select>
					<div id="mapboxTokenSection" style="display: none; margin-top: 8px">
						<input
							type="text"
							id="mapboxTokenInput"
							placeholder="Mapbox ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³"
							style="
								width: 100%;
								padding: 6px;
								border-radius: 4px;
								border: 1px solid rgba(0, 0, 0, 0.2);
								font-size: 11px;
								margin-bottom: 6px;
							"
						/>
						<button
							id="saveMapboxToken"
							class="success"
							style="width: 100%"
							data-tooltip="ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã—ã¦ãƒªãƒ­ãƒ¼ãƒ‰"
						>
							ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜
						</button>
					</div>
					<div
						style="margin-top: 8px; font-size: 10px; color: rgba(0, 0, 0, 0.6); line-height: 1.4"
					>
						<div id="currentProviderInfo"></div>
					</div>
				</div>
			</div>

			<!-- ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
			<div class="control-section">
				<div class="section-title">ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼</div>
				<div class="button-group">
					<button id="toggle3D" class="info" data-tooltip="2Då¹³é¢è¡¨ç¤ºã¨3Dåœ°å½¢è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™">
						2D/3D
					</button>
					<button
						id="toggleDebugMode"
						class="warning"
						data-tooltip="é–‹ç™ºè€…å‘ã‘ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚ãƒ•ãƒ©ã‚¤ãƒˆä¸­ã®ãƒ‡ãƒ¼ã‚¿ã®å‹•ãã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèªã§ãã¾ã™"
					>
						ãƒ‡ãƒãƒƒã‚°
					</button>
				</div>
			</div>

			<!-- ãƒ‰ãƒ­ãƒ¼ãƒ³ç‚¹æ¤œã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
			<div class="control-section">
				<div class="section-title">ãƒ‰ãƒ­ãƒ¼ãƒ³ç‚¹æ¤œ</div>
				<div class="button-group">
					<button
						id="loadDroneData"
						class="success"
						data-tooltip="æ±äº¬ã‚¿ãƒ¯ãƒ¼å‘¨è¾ºã«ç‚¹æ¤œãƒ‰ãƒ­ãƒ¼ãƒ³ã‚’é…ç½®ã—ã¾ã™ã€‚ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨3æ©Ÿã®ãƒ‰ãƒ­ãƒ¼ãƒ³ãŒè‡ªå‹•é…ç½®ã•ã‚Œã¾ã™"
					>
						é…ç½®
					</button>
					<button
						id="startSimulation"
						class="info"
						data-tooltip="ãƒ‰ãƒ­ãƒ¼ãƒ³ã®ãƒ©ãƒ³ãƒ€ãƒ ç§»å‹•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹/åœæ­¢ã—ã¾ã™ã€‚è‡ªå‹•ã§å‘¨è¾ºã‚’é£›è¡Œã—ã¾ã™"
					>
						ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
					</button>
					<button
						id="toggleDrawMode"
						class="warning"
						data-tooltip="ãƒãƒƒãƒ—ä¸Šã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç‚¹æ¤œãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã€‚ã‚‚ã†ä¸€åº¦æŠ¼ã™ã¨è§£é™¤"
					>
						ãƒã‚¤ãƒ³ãƒˆä½œæˆ
					</button>
					<button
						id="togglePolygonMode"
						class="warning"
						data-tooltip="ãƒãƒƒãƒ—ä¸Šã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤šè§’å½¢ã‚¨ãƒªã‚¢ã‚’æç”»ã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã€‚ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§ç¢ºå®š"
					>
						å¤šè§’å½¢ä½œæˆ
					</button>
					<button
						id="toggleEditMode"
						class="info"
						data-tooltip="ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é¸æŠãƒ»ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•ãƒ»å‰Šé™¤ãŒã§ãã‚‹ç·¨é›†ãƒ¢ãƒ¼ãƒ‰"
					>
						ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç·¨é›†
					</button>
				</div>
			</div>

			<!-- ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
			<div class="control-section">
				<div class="section-title">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</div>
				<div class="button-group">
					<button
						id="importCSV"
						class="success"
						data-tooltip="CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰3Dãƒã‚¤ãƒ³ãƒˆãƒ»ãƒ¡ãƒƒã‚·ãƒ¥ãƒ»ã‚¦ã‚§ã‚¤ãƒã‚¤ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™"
					>
						CSVå…¥åŠ›
					</button>
					<button
						id="importGeoJSON"
						class="success"
						data-tooltip="GeoJSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰åœ°ç†ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™"
					>
						GeoJSONå…¥åŠ›
					</button>
					<button
						id="exportCSV"
						class="info"
						data-tooltip="ç¾åœ¨ã®å…¨ãƒ‡ãƒ¼ã‚¿ã‚’CSVå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™"
					>
						CSVå‡ºåŠ›
					</button>
					<button
						id="exportGeoJSON"
						class="info"
						data-tooltip="ç¾åœ¨ã®å…¨ãƒ‡ãƒ¼ã‚¿ã‚’GeoJSONå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™"
					>
						GeoJSONå‡ºåŠ›
					</button>
					<button
						id="clearData"
						class="error"
						data-tooltip="ãƒãƒƒãƒ—ä¸Šã®ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚å…ƒã«æˆ»ã›ã¾ã›ã‚“"
					>
						ã‚¯ãƒªã‚¢
					</button>
				</div>
			</div>

			<!-- ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
			<div class="control-section">
				<div class="section-title">ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿</div>
				<div class="button-group">
					<button
						id="importFlightData"
						class="success"
						data-tooltip="çµ±ä¸€ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿å½¢å¼ã®CSV/GeoJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™"
					>
						ãƒ•ãƒ©ã‚¤ãƒˆå…¥åŠ›
					</button>
					<button
						id="loadSampleFlightData"
						class="success"
						data-tooltip="æ±äº¬ã‚¿ãƒ¯ãƒ¼ç‚¹æ¤œã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚ã™ãã«è©¦ã›ã¾ã™"
					>
						ã‚µãƒ³ãƒ—ãƒ«
					</button>
					<button
						id="exportFlightData"
						class="info"
						data-tooltip="ç¾åœ¨ã®ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’CSV/GeoJSONå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™"
					>
						ãƒ•ãƒ©ã‚¤ãƒˆå‡ºåŠ›
					</button>
					<button
						id="exportMission"
						class="info"
						data-tooltip="ãƒ•ãƒ©ã‚¤ãƒˆãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’KML/JSONå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚ä»–ã®ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚½ãƒ•ãƒˆã§ä½¿ç”¨å¯èƒ½"
					>
						ãƒŸãƒƒã‚·ãƒ§ãƒ³å‡ºåŠ›
					</button>
				</div>
			</div>

			<!-- æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
			<div class="control-section">
				<div class="section-title">è»Œè·¡ãƒ‡ãƒ¼ã‚¿</div>
				<div class="button-group">
					<button
						id="importTrajectory"
						class="success"
						data-tooltip="æ™‚ç³»åˆ—è»Œè·¡ãƒ‡ãƒ¼ã‚¿ã‚’CSV/GeoJSONå½¢å¼ã§èª­ã¿è¾¼ã¿ã¾ã™"
					>
						è»Œè·¡å…¥åŠ›
					</button>
					<button
						id="loadSampleTrajectory"
						class="success"
						data-tooltip="ã‚µãƒ³ãƒ—ãƒ«è»Œè·¡ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚ãƒ‰ãƒ­ãƒ¼ãƒ³ã®é£›è¡ŒçµŒè·¯ã‚’ç¢ºèªã§ãã¾ã™"
					>
						ã‚µãƒ³ãƒ—ãƒ«
					</button>
					<button
						id="exportTrajectory"
						class="info"
						data-tooltip="ç¾åœ¨ã®è»Œè·¡ãƒ‡ãƒ¼ã‚¿ã‚’CSV/GeoJSONå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™"
					>
						è»Œè·¡å‡ºåŠ›
					</button>
					<button
						id="exportFlightLog"
						class="info"
						data-tooltip="ãƒ•ãƒ©ã‚¤ãƒˆãƒ­ã‚°ã‚’CSVå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚é£›è¡Œè¨˜éŒ²ã¨ã—ã¦ä¿å­˜ã§ãã¾ã™"
					>
						ãƒ­ã‚°å‡ºåŠ›
					</button>
				</div>
			</div>

			<div id="status">åœ°å›³èª­ã¿è¾¼ã¿ä¸­...</div>
			<!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º -->
		</div>

		<!-- æƒ…å ±ãƒ‘ãƒãƒ« -->
		<div class="info-panel visible" id="infoPanel">
			<button class="info-panel-toggle" id="infoPanelToggle">
				<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
					<path
						d="M18 6L6 18M6 6l12 12"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
					/>
				</svg>
			</button>
			<div class="info-title">ç‚¹æ¤œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</div>
			<ul class="info-list">
				<li><strong>1. é›¢é™¸</strong>: å—å´ã‹ã‚‰é–‹å§‹</li>
				<li><strong>2. å¤–å´æ—‹å›</strong>: 4ã¤ã®è§’ã§ãƒ›ãƒãƒªãƒ³ã‚°ãƒ»æ’®å½±</li>
				<li><strong>3. å†…å´æ—‹å›</strong>: è©³ç´°æ’®å½±ã®ãŸã‚å†…å´æ—‹å›</li>
				<li><strong>4. ä¸­å¿ƒéƒ¨æ’®å½±</strong>: ä¸­å¿ƒéƒ¨ã§è©³ç´°æ’®å½±</li>
				<li><strong>5. ç€é™¸</strong>: é›¢é™¸åœ°ç‚¹ã«æˆ»ã£ã¦ç€é™¸</li>
			</ul>
			<div class="info-title" style="margin-top: 12px">ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</div>
			<ul class="info-list">
				<li><strong>ã‚µãƒ³ãƒ—ãƒ«</strong>: å„æ©Ÿèƒ½ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’1ã‚¯ãƒªãƒƒã‚¯ã§èª­ã¿è¾¼ã¿</li>
				<li>
					<strong>ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</strong>: JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰æ–°ã—ã„ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’èª­ã¿è¾¼ã¿
				</li>
				<li><strong>ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</strong>: CSV/GeoJSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰3Dãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿</li>
			</ul>
		</div>

		<!-- ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ‘ãƒãƒ« -->
		<div class="flight-plan-export visible" id="flightPlanExport">
			<button class="flight-plan-toggle" id="flightPlanToggle">
				<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
					<path
						d="M18 6L6 18M6 6l12 12"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
					/>
				</svg>
			</button>
			<div class="flight-plan-title">ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³</div>
			<div class="flight-plan-buttons">
				<select
					id="flightPlanSelect"
					style="
						width: 100%;
						padding: 6px;
						margin-bottom: 8px;
						border-radius: 6px;
						border: 1px solid rgba(0, 0, 0, 0.2);
						background: rgba(255, 255, 255, 0.8);
						font-size: 11px;
					"
				>
					<option value="tokyo-tower">æ±äº¬ã‚¿ãƒ¯ãƒ¼ç‚¹æ¤œ</option>
					<option value="mt-fuji">å¯Œå£«å±±å‘¨éŠ</option>
					<option value="tokyo-skytree">æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼</option>
					<option value="kyoto-kinkakuji">äº¬éƒ½é‡‘é–£å¯º</option>
					<option value="custom">ã‚«ã‚¹ã‚¿ãƒ ...</option>
				</select>
				<button
					id="startFlightPlan"
					class="danger"
					data-tooltip="é¸æŠã—ãŸãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’å®Ÿè¡Œé–‹å§‹ã—ã¾ã™ã€‚ãƒ‰ãƒ­ãƒ¼ãƒ³ãŒè‡ªå‹•ã§é£›è¡Œã—ã¾ã™"
				>
					é–‹å§‹
				</button>
				<button
					id="pauseFlightPlan"
					class="warning"
					data-tooltip="å®Ÿè¡Œä¸­ã®ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’ä¸€æ™‚åœæ­¢/å†é–‹ã—ã¾ã™"
				>
					ä¸€æ™‚åœæ­¢
				</button>
				<button
					id="enableGameControl"
					class="info"
					data-tooltip="ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰(WASD)ã‚„ã‚²ãƒ¼ãƒ ãƒ‘ãƒƒãƒ‰ã§ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚’æ‰‹å‹•æ“ä½œã§ãã¾ã™"
				>
					æ‰‹å‹•æ“ä½œ
				</button>
				<button
					id="exportFlightPlan"
					class="info"
					data-tooltip="ç¾åœ¨ã®ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™"
				>
					ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
				</button>
				<button
					id="importFlightPlan"
					class="success"
					data-tooltip="JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’èª­ã¿è¾¼ã¿ã¾ã™"
				>
					ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
				</button>
			</div>
		</div>

		<!-- ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ˜ãƒ«ãƒ—ãƒ‘ãƒãƒ« -->
		<div
			id="gameControlHelp"
			class="info-panel"
			style="bottom: 220px; top: auto; right: 20px; display: none"
		>
			<div class="info-title">ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</div>
			<ul class="info-list" style="font-size: 10px; line-height: 1.4">
				<li><strong>W/â†‘</strong>: å‰é€²</li>
				<li><strong>S/â†“</strong>: å¾Œé€€</li>
				<li><strong>A/â†</strong>: å·¦ç§»å‹•</li>
				<li><strong>D/â†’</strong>: å³ç§»å‹•</li>
				<li><strong>Space</strong>: ä¸Šæ˜‡</li>
				<li><strong>Shift</strong>: ä¸‹é™</li>
				<li><strong>Q</strong>: å·¦å›è»¢</li>
				<li><strong>E</strong>: å³å›è»¢</li>
				<li><strong>Ctrl</strong>: ã‚¿ãƒ¼ãƒœ</li>
			</ul>
			<button id="disableGameControl" class="error" style="width: 100%; margin-top: 8px">
				æ‰‹å‹•æ“ä½œçµ‚äº†
			</button>
		</div>

		<!-- ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ« -->
		<div class="mobile-flight-plan-modal-overlay" id="mobileFlightPlanModalOverlay">
			<div class="mobile-flight-plan-modal">
				<button class="mobile-flight-plan-modal-close" id="mobileFlightPlanModalClose">
					<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
						<path
							d="M18 6L6 18M6 6l12 12"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
						/>
					</svg>
				</button>

				<h2 style="margin: 0 0 20px 0; font-size: 18px; font-weight: 700">ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³</h2>

				<div style="margin-bottom: 16px">
					<label style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 13px"
						>ãƒ—ãƒ©ãƒ³é¸æŠ</label
					>
					<select
						id="mobileFlightPlanSelect"
						style="
							width: 100%;
							padding: 12px;
							border-radius: 6px;
							border: 1px solid rgba(0, 0, 0, 0.2);
							background: rgba(255, 255, 255, 0.9);
							font-size: 16px;
							-webkit-appearance: none;
							appearance: none;
						"
					>
						<option value="tokyo-tower">æ±äº¬ã‚¿ãƒ¯ãƒ¼ç‚¹æ¤œ</option>
						<option value="mt-fuji">å¯Œå£«å±±å‘¨éŠ</option>
						<option value="tokyo-skytree">æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼</option>
						<option value="kyoto-kinkakuji">äº¬éƒ½é‡‘é–£å¯º</option>
						<option value="custom">ã‚«ã‚¹ã‚¿ãƒ ...</option>
					</select>
				</div>

				<div class="mobile-flight-plan-buttons">
					<button id="mobileStartFlightPlan" class="mobile-fp-btn mobile-fp-start">
						<svg
							width="16"
							height="16"
							viewBox="0 0 24 24"
							fill="currentColor"
							style="margin-right: 6px; flex-shrink: 0"
						>
							<path d="M8 5v14l11-7z" />
						</svg>
						<span>é–‹å§‹</span>
					</button>
					<button id="mobilePauseFlightPlan" class="mobile-fp-btn mobile-fp-pause">
						<svg
							width="16"
							height="16"
							viewBox="0 0 24 24"
							fill="currentColor"
							style="margin-right: 6px; flex-shrink: 0"
						>
							<rect x="6" y="4" width="4" height="16" />
							<rect x="14" y="4" width="4" height="16" />
						</svg>
						<span>ä¸€æ™‚åœæ­¢</span>
					</button>
					<button id="mobileEnableGameControl" class="mobile-fp-btn mobile-fp-manual">
						<svg
							width="16"
							height="16"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							style="margin-right: 6px; flex-shrink: 0"
						>
							<rect x="2" y="6" width="20" height="12" rx="2" />
							<path d="M6 12h4m8 0h4M14 10v4M10 10v4" />
						</svg>
						<span>æ‰‹å‹•æ“ä½œ</span>
					</button>
					<button id="mobileExportFlightPlan" class="mobile-fp-btn mobile-fp-export">
						<svg
							width="16"
							height="16"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							style="margin-right: 6px; flex-shrink: 0"
						>
							<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
							<polyline points="17 8 12 3 7 8" />
							<line x1="12" y1="3" x2="12" y2="15" />
						</svg>
						<span>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span>
					</button>
					<button id="mobileImportFlightPlan" class="mobile-fp-btn mobile-fp-import">
						<svg
							width="16"
							height="16"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							style="margin-right: 6px; flex-shrink: 0"
						>
							<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
							<polyline points="7 10 12 15 17 10" />
							<line x1="12" y1="15" x2="12" y2="3" />
						</svg>
						<span>ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span>
					</button>
				</div>
			</div>
		</div>

		<!-- ãƒ‡ãƒãƒƒã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
		<button class="debug-toggle-btn" id="debugToggleBtn" data-tooltip="ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã‚’é–‹ã">
			<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
				<path
					d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6.3 1 .9 1 1.6v3.1c0 1-.8 1.8-1.8 1.8h-4c-1 0-1.8-.8-1.8-1.8v-3.1c0-.7.4-1.3 1-1.6V9.5C9.2 8.1 10.6 7 12 7zm0 1.5c-.7 0-1.3.5-1.3 1v1h2.6v-1c0-.5-.6-1-1.3-1z"
				/>
			</svg>
		</button>
		<div class="debug-overlay" id="debugOverlay">
			<div class="debug-overlay-header">
				<div class="debug-overlay-title">DEBUG MODE</div>
				<button class="debug-overlay-close" id="debugOverlayClose">
					<svg viewBox="0 0 24 24" width="14" height="14">
						<path
							d="M18 6L6 18M6 6l12 12"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
						/>
					</svg>
				</button>
			</div>
			<div class="debug-overlay-content">
				<!-- ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ -->
				<div class="debug-section">
					<div class="debug-section-title">System State</div>
					<div class="debug-row">
						<span class="debug-label">Flight Status</span>
						<span class="debug-value" id="debugFlightStatus">STANDBY</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Current Phase</span>
						<span class="debug-value" id="debugCurrentPhase">-</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Phase Index</span>
						<span class="debug-value" id="debugPhaseIndex">0 / 0</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Elapsed Time</span>
						<span class="debug-value" id="debugElapsedTime">00:00:00</span>
					</div>
				</div>

				<!-- ãƒ‰ãƒ­ãƒ¼ãƒ³çŠ¶æ…‹ -->
				<div class="debug-section">
					<div class="debug-section-title">Drone State</div>
					<div class="debug-row">
						<span class="debug-label">Position (lng, lat)</span>
						<span class="debug-value" id="debugDronePosition">-, -</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Altitude (m)</span>
						<span class="debug-value" id="debugDroneAltitude">-</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Heading (deg)</span>
						<span class="debug-value" id="debugDroneHeading">-</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Speed (m/s)</span>
						<span class="debug-value" id="debugDroneSpeed">-</span>
					</div>
				</div>

				<!-- ã‚«ãƒ¡ãƒ©çŠ¶æ…‹ -->
				<div class="debug-section">
					<div class="debug-section-title">Camera State</div>
					<div class="debug-row">
						<span class="debug-label">Center (lng, lat)</span>
						<span class="debug-value" id="debugCameraCenter">-, -</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Zoom</span>
						<span class="debug-value" id="debugCameraZoom">-</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Pitch</span>
						<span class="debug-value" id="debugCameraPitch">-</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Bearing</span>
						<span class="debug-value" id="debugCameraBearing">-</span>
					</div>
				</div>

				<!-- ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚ºãƒ‡ãƒ¼ã‚¿ -->
				<div class="debug-section">
					<div class="debug-section-title">Current Phase Data</div>
					<div class="debug-json" id="debugPhaseData">
						{ "phase": "-", "action": "-", "position": [0, 0, 0], "duration": 0 }
					</div>
				</div>

				<!-- ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚° -->
				<div class="debug-section">
					<div class="debug-section-title">Event Log (Latest 10)</div>
					<div class="debug-event-log" id="debugEventLog">
						<div class="debug-event">
							<span class="debug-event-time">--:--:--</span>
							<span class="debug-event-type">INIT</span>
							<span class="debug-event-data">Debug mode initialized</span>
						</div>
					</div>
				</div>

				<!-- ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆ -->
				<div class="debug-section">
					<div class="debug-section-title">Data Statistics</div>
					<div class="debug-row">
						<span class="debug-label">Total Objects</span>
						<span class="debug-value" id="debugTotalObjects">0</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Total Phases</span>
						<span class="debug-value" id="debugTotalPhases">0</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">FPS</span>
						<span class="debug-value" id="debugFPS">-</span>
					</div>
					<div class="debug-row">
						<span class="debug-label">Memory (MB)</span>
						<span class="debug-value" id="debugMemory">-</span>
					</div>
				</div>
			</div>
		</div>

		<!-- ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ€ãƒ« -->
		<div class="help-modal-overlay" id="helpModalOverlay">
			<div class="help-modal">
				<button class="help-modal-close" id="helpModalClose">
					<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
						<path
							d="M18 6L6 18M6 6l12 12"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
						/>
					</svg>
				</button>

				<h2>ãƒ‰ãƒ­ãƒ¼ãƒ³é£›è¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ - ãƒ˜ãƒ«ãƒ—</h2>

				<div class="help-section">
					<h3>ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h3>
					<p>
						ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ãŸå»ºç‰©ç‚¹æ¤œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ãŸã‚ã®3Då¯è¦–åŒ–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚å›½åœŸåœ°ç†é™¢ã®åœ°å½¢ãƒ‡ãƒ¼ã‚¿ã¨MapLibre
						GLã‚’ä½¿ç”¨ã—ã¦ã€ãƒªã‚¢ãƒ«ãª3Dç’°å¢ƒã§ãƒ‰ãƒ­ãƒ¼ãƒ³ã®é£›è¡Œè¨ˆç”»ã‚’ä½œæˆãƒ»å®Ÿè¡Œã§ãã¾ã™ã€‚
					</p>
				</div>

				<div class="help-section">
					<h3>åŸºæœ¬æ“ä½œ</h3>
					<ul>
						<li><strong>2D/3Dåˆ‡ã‚Šæ›¿ãˆ</strong>: ãƒãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼ã‚’2Dã¨3Dã§åˆ‡ã‚Šæ›¿ãˆã¾ã™</li>
						<li><strong>é…ç½®</strong>: ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚’æ±äº¬ã‚¿ãƒ¯ãƒ¼å‘¨è¾ºã«é…ç½®ã—ã¾ã™</li>
						<li>
							<strong>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</strong>: ãƒ©ãƒ³ãƒ€ãƒ ç§»å‹•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹/åœæ­¢ã—ã¾ã™
						</li>
						<li><strong>ãƒã‚¤ãƒ³ãƒˆä½œæˆ</strong>: ãƒãƒƒãƒ—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç‚¹æ¤œãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã™</li>
						<li><strong>å¤šè§’å½¢ä½œæˆ</strong>: ãƒãƒƒãƒ—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç‚¹æ¤œã‚¨ãƒªã‚¢ã‚’æç”»ã—ã¾ã™</li>
						<li><strong>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç·¨é›†</strong>: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é¸æŠãƒ»ç§»å‹•ãƒ»å‰Šé™¤ãŒã§ãã¾ã™</li>
					</ul>
				</div>

				<div class="help-section">
					<h3>ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h3>
					<ul>
						<li>
							<strong>CSVå…¥åŠ›/å‡ºåŠ›</strong>:
							3Dãƒã‚¤ãƒ³ãƒˆãƒ»ãƒ¡ãƒƒã‚·ãƒ¥ãƒ»ã‚¦ã‚§ã‚¤ãƒã‚¤ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’CSVå½¢å¼ã§å…¥å‡ºåŠ›
						</li>
						<li><strong>GeoJSONå…¥åŠ›/å‡ºåŠ›</strong>: åœ°ç†ãƒ‡ãƒ¼ã‚¿ã‚’GeoJSONå½¢å¼ã§å…¥å‡ºåŠ›</li>
						<li><strong>ãƒ•ãƒ©ã‚¤ãƒˆå…¥åŠ›</strong>: çµ±ä¸€ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿å½¢å¼ã®CSV/GeoJSONã‚’èª­ã¿è¾¼ã¿</li>
						<li><strong>ãƒŸãƒƒã‚·ãƒ§ãƒ³å‡ºåŠ›</strong>: ãƒ•ãƒ©ã‚¤ãƒˆãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’KML/JSONå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</li>
					</ul>
				</div>

				<div class="help-section">
					<h3>ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³</h3>
					<ul>
						<li>
							<strong>ãƒ—ãƒ©ãƒ³é¸æŠ</strong>:
							æ±äº¬ã‚¿ãƒ¯ãƒ¼ã€å¯Œå£«å±±ã€ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼ã€äº¬éƒ½é‡‘é–£å¯ºãªã©ã®ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ—ãƒ©ãƒ³ã‚’é¸æŠ
						</li>
						<li><strong>é–‹å§‹</strong>: é¸æŠã—ãŸãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™</li>
						<li><strong>ä¸€æ™‚åœæ­¢</strong>: å®Ÿè¡Œä¸­ã®ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’ä¸€æ™‚åœæ­¢ã—ã¾ã™</li>
						<li><strong>æ‰‹å‹•æ“ä½œ</strong>: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰/ã‚²ãƒ¼ãƒ ãƒ‘ãƒƒãƒ‰ã§ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚’æ‰‹å‹•æ“ä½œã—ã¾ã™</li>
						<li>
							<strong>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</strong>: ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿
						</li>
					</ul>
				</div>

				<div class="help-section">
					<h3>æ‰‹å‹•æ“ä½œï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰</h3>
					<ul>
						<li><strong>W/â†‘</strong>: å‰é€²</li>
						<li><strong>S/â†“</strong>: å¾Œé€€</li>
						<li><strong>A/â†</strong>: å·¦ç§»å‹•</li>
						<li><strong>D/â†’</strong>: å³ç§»å‹•</li>
						<li><strong>Space</strong>: ä¸Šæ˜‡</li>
						<li><strong>Shift</strong>: ä¸‹é™</li>
						<li><strong>Q</strong>: å·¦å›è»¢</li>
						<li><strong>E</strong>: å³å›è»¢</li>
						<li><strong>Ctrl</strong>: ã‚¿ãƒ¼ãƒœï¼ˆé€Ÿåº¦ã‚¢ãƒƒãƒ—ï¼‰</li>
					</ul>
				</div>

				<div class="help-section">
					<h3>ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h3>
					<ul>
						<li>
							<strong>ãƒ‰ãƒ­ãƒ¼ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„</strong>:
							ã€Œé…ç½®ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ‰ãƒ­ãƒ¼ãƒ³ã‚’é…ç½®ã—ã¦ãã ã•ã„
						</li>
						<li>
							<strong>ãƒ•ãƒ©ã‚¤ãƒˆãƒ—ãƒ©ãƒ³ãŒå‹•ä½œã—ãªã„</strong>:
							ãƒ—ãƒ©ãƒ³ã‚’é¸æŠã—ã¦ã‹ã‚‰ã€Œé–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„
						</li>
						<li>
							<strong>3Dè¡¨ç¤ºãŒé‡ã„</strong>:
							2Dè¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„
						</li>
					</ul>
				</div>
			</div>
		</div>

		<!-- ä»®æƒ³ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç”¨ï¼‰ -->
		<div id="leftJoystick" class="virtual-joystick left">
			<div class="joystick-label">ç§»å‹•</div>
			<div id="leftJoystickKnob" class="joystick-knob"></div>
		</div>

		<div id="rightJoystick" class="virtual-joystick right">
			<div class="joystick-label">å›è»¢ãƒ»é«˜åº¦</div>
			<div id="rightJoystickKnob" class="joystick-knob"></div>
		</div>

		<!-- ãƒ•ãƒ©ã‚¤ãƒˆãƒ­ã‚°Footer -->
		<div class="footer">
			<div class="footer-header">
				<div class="footer-title">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°</div>
				<div class="footer-controls">
					<button id="clearLog" data-tooltip="ãƒ•ãƒ©ã‚¤ãƒˆãƒ­ã‚°ã‚’ã™ã¹ã¦ã‚¯ãƒªã‚¢ã—ã¾ã™">ã‚¯ãƒªã‚¢</button>
					<button id="exportLog" data-tooltip="ãƒ•ãƒ©ã‚¤ãƒˆãƒ­ã‚°ã‚’CSVãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™">
						å‡ºåŠ›
					</button>
					<button id="toggleLog" data-tooltip="ãƒ•ãƒ©ã‚¤ãƒˆãƒ­ã‚°ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™">
						è¡¨ç¤ºåˆ‡æ›¿
					</button>
				</div>
			</div>
			<div id="flightStatus" class="flight-status"></div>
			<div id="flightLogContainer" class="flight-log-container">
				<div id="flightLog" class="flight-log">
					<div class="log-entry">
						<span class="log-timestamp">--:--:--</span>
						<span class="log-phase">ã‚·ã‚¹ãƒ†ãƒ </span>
						<span class="log-action">åˆæœŸåŒ–</span>
						<span class="log-details">ãƒ‰ãƒ­ãƒ¼ãƒ³é£›è¡Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼æº–å‚™å®Œäº†</span>
					</div>
				</div>
			</div>
		</div>

		<script type="module" src="./index.ts"></script>

		<!-- å‹•çš„TooltipåˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
		<script>
			;(function () {
				// Tooltipè¦ç´ ã‚’ä½œæˆ
				const tooltip = document.createElement('div')
				tooltip.className = 'dynamic-tooltip'
				tooltip.id = 'globalTooltip'
				document.body.appendChild(tooltip)

				let hideTimeout = null
				let showTimeout = null
				let currentTarget = null
				const SHOW_DELAY = 800 // è¡¨ç¤ºã¾ã§ã®å¾…æ©Ÿæ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰

				// Tooltipã‚’è¡¨ç¤º
				function showTooltip(target, text) {
					if (!text) return

					currentTarget = target
					tooltip.textContent = text

					// çŸ¢å°ã‚¯ãƒ©ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
					tooltip.classList.remove('arrow-top', 'arrow-bottom', 'arrow-left', 'arrow-right')

					// ä¸€æ—¦è¡¨ç¤ºã—ã¦å¹…ãƒ»é«˜ã•ã‚’è¨ˆç®—
					tooltip.style.visibility = 'hidden'
					tooltip.classList.add('visible')

					const rect = target.getBoundingClientRect()
					const tooltipRect = tooltip.getBoundingClientRect()
					const padding = 12

					let top, left
					let arrowClass = 'arrow-top'

					// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ãƒœã‚¿ãƒ³ã®ä¸‹ã«è¡¨ç¤º
					top = rect.bottom + padding
					left = rect.left + rect.width / 2 - tooltipRect.width / 2

					// ä¸‹ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„å ´åˆã¯ä¸Šã«è¡¨ç¤º
					if (top + tooltipRect.height > window.innerHeight - padding) {
						top = rect.top - tooltipRect.height - padding
						arrowClass = 'arrow-bottom'
					}

					// å·¦ç«¯ãŒã¯ã¿å‡ºã‚‹å ´åˆ
					if (left < padding) {
						left = padding
					}

					// å³ç«¯ãŒã¯ã¿å‡ºã‚‹å ´åˆ
					if (left + tooltipRect.width > window.innerWidth - padding) {
						left = window.innerWidth - tooltipRect.width - padding
					}

					// ä¸Šä¸‹ä¸¡æ–¹ã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„å ´åˆã¯å³ã«è¡¨ç¤º
					if (top < padding && rect.top - tooltipRect.height - padding < padding) {
						if (rect.right + tooltipRect.width + padding < window.innerWidth) {
							top = rect.top + rect.height / 2 - tooltipRect.height / 2
							left = rect.right + padding
							arrowClass = 'arrow-left'
						} else {
							// å·¦ã«è¡¨ç¤º
							top = rect.top + rect.height / 2 - tooltipRect.height / 2
							left = rect.left - tooltipRect.width - padding
							arrowClass = 'arrow-right'
						}
					}

					// ä¸Šç«¯ãŒã¯ã¿å‡ºã‚‹å ´åˆ
					if (top < padding) {
						top = padding
					}

					tooltip.style.top = top + 'px'
					tooltip.style.left = left + 'px'
					tooltip.style.visibility = 'visible'
					tooltip.classList.add(arrowClass)
				}

				// Tooltipã‚’éè¡¨ç¤º
				function hideTooltip() {
					tooltip.classList.remove('visible')
					currentTarget = null
				}

				// è¡¨ç¤ºã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
				function cancelShow() {
					if (showTimeout) {
						clearTimeout(showTimeout)
						showTimeout = null
					}
				}

				// å®‰å…¨ã«closestã‚’å‘¼ã³å‡ºã™ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
				function getTooltipTarget(e) {
					if (e.target && typeof e.target.closest === 'function') {
						return e.target.closest('[data-tooltip]')
					}
					return null
				}

				// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
				document.addEventListener(
					'mouseenter',
					function (e) {
						const target = getTooltipTarget(e)
						if (target) {
							cancelShow()
							if (hideTimeout) {
								clearTimeout(hideTimeout)
								hideTimeout = null
							}
							// é…å»¶è¡¨ç¤º
							showTimeout = setTimeout(function () {
								showTooltip(target, target.getAttribute('data-tooltip'))
							}, SHOW_DELAY)
						}
					},
					true
				)

				document.addEventListener(
					'mouseleave',
					function (e) {
						const target = getTooltipTarget(e)
						if (target) {
							cancelShow()
							if (target === currentTarget) {
								hideTimeout = setTimeout(hideTooltip, 100)
							}
						}
					},
					true
				)

				// ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã«ã‚‚è¡¨ç¤ºï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œï¼‰
				document.addEventListener(
					'focusin',
					function (e) {
						const target = getTooltipTarget(e)
						if (target) {
							cancelShow()
							showTimeout = setTimeout(function () {
								showTooltip(target, target.getAttribute('data-tooltip'))
							}, SHOW_DELAY)
						}
					},
					true
				)

				document.addEventListener(
					'focusout',
					function (e) {
						const target = getTooltipTarget(e)
						if (target) {
							cancelShow()
							hideTooltip()
						}
					},
					true
				)

				// ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã¯éè¡¨ç¤º
				document.addEventListener(
					'scroll',
					function () {
						cancelShow()
						hideTooltip()
					},
					true
				)

				// ã‚¯ãƒªãƒƒã‚¯æ™‚ã¯éè¡¨ç¤ºï¼ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ™‚ï¼‰
				document.addEventListener(
					'click',
					function (e) {
						const target = getTooltipTarget(e)
						if (target) {
							cancelShow()
							hideTooltip()
						}
					},
					true
				)
			})()
		</script>
	</body>
</html>
